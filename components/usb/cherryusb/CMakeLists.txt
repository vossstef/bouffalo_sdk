sdk_generate_library()
sdk_add_include_directories(common)
sdk_add_include_directories(osal)
sdk_add_include_directories(core)
sdk_add_include_directories(class/cdc)
sdk_add_include_directories(class/hid)
sdk_add_include_directories(class/vendor/xbox)
sdk_add_include_directories(class/msc)
sdk_add_include_directories(class/audio)
sdk_add_include_directories(class/video)
sdk_add_include_directories(class/hub)
sdk_add_include_directories(class/wireless)
sdk_add_include_directories(class/midi)
sdk_add_include_directories(class/adb)
sdk_add_include_directories(class/dfu)
sdk_add_include_directories(class/vendor/net)
sdk_add_include_directories(class/vendor/serial)
sdk_add_include_directories(class/vendor/wifi)
sdk_add_include_directories(class/aoa)

sdk_add_compile_definitions(-DCONFIG_CHERRYUSB)

if(CONFIG_CHERRYUSB_DEVICE)
    sdk_library_add_sources(core/usbd_core.c)

    if((NOT ("${CHIP}" STREQUAL "bl702")))
        sdk_add_compile_definitions(-DCONFIG_USB_ALIGN_SIZE=32)
        #sdk_library_add_sources(port/bl_usb/bl_usbdev.c)
        if(CONFIG_USB_HS)
        sdk_add_compile_definitions(-DCONFIG_USB_HS)
        endif()
        else()
        if(CONFIG_USB_HS)
        message(FATAL_ERROR "BL702 USB do not support high speed")
        endif()
    endif()

    if(CONFIG_CHERRYUSB_DEVICE_CDC)
    sdk_library_add_sources(class/cdc/usbd_cdc.c)
    endif()
    if(CONFIG_CHERRYUSB_DEVICE_HID)
    sdk_library_add_sources(class/hid/usbd_hid.c)
    endif()
    if(CONFIG_CHERRYUSB_DEVICE_MSC)
    sdk_library_add_sources(class/msc/usbd_msc.c)
    endif()
    if(CONFIG_CHERRYUSB_DEVICE_AUDIO)
    sdk_library_add_sources(class/audio/usbd_audio.c)
    endif()
    if(CONFIG_CHERRYUSB_DEVICE_VIDEO)
    sdk_library_add_sources(class/video/usbd_video.c)
    endif()
endif()

if(CONFIG_CHERRYUSB_HOST)
    sdk_library_add_sources(core/usbh_core.c)
    sdk_library_add_sources(port/ehci/usb_hc_ehci.c)
    sdk_library_add_sources(port/ehci/usb_glue_bouffalo.c)
    sdk_library_add_sources(osal/usb_osal_freertos.c)
    sdk_library_add_sources(class/hid/usbh_hid.c)
    sdk_library_add_sources(class/hub/usbh_hub.c)
    sdk_library_add_sources(class/vendor/xbox/usbh_xbox.c)
    sdk_library_add_sources(class/video/usbh_video.c)
    sdk_library_add_sources(class/audio/usbh_audio.c)
#    sdk_library_add_sources(class/vendor/net/usbh_asix.c)
#    sdk_library_add_sources(class/vendor/net/usbh_rtl8152.c)
#    sdk_library_add_sources(class/vendor/wifi/usbh_bl616.c)
#    sdk_library_add_sources(class/cdc/usbh_cdc_acm.c)
#    sdk_library_add_sources(class/msc/usbh_msc.c)
#    sdk_library_add_sources(class/cdc/usbh_cdc_ecm.c)
#    sdk_library_add_sources(class/cdc/usbh_cdc_ncm.c)
#    sdk_library_add_sources(class/wireless/usbh_rndis.c)
#    sdk_library_add_sources(class/audio/usbd_audio.c)


    if(CONFIG_CHERRYUSB_HOST_CDC_ACM)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/cdc/usbh_cdc_acm.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_CDC_ECM)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/cdc/usbh_cdc_ecm.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_CDC_RNDIS)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/wireless/usbh_rndis.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_CDC_NCM)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/cdc/usbh_cdc_ncm.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_HID)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/hid/usbh_hid.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_MSC)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/msc/usbh_msc.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_VIDEO)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/video/usbh_video.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_AUDIO)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/audio/usbh_audio.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_ASIX)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/net/usbh_asix.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_RTL8152)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/net/usbh_rtl8152.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_CH34X)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/serial/usbh_ch34x.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_CP210X)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/serial/usbh_cp210x.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_FTDI)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/serial/usbh_ftdi.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_PL2303)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/serial/usbh_pl2303.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_BL616)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/vendor/wifi/usbh_bl616.c)
    endif()
    if(CONFIG_CHERRYUSB_HOST_AOA)
    list(APPEND cherryusb_srcs ${CMAKE_CURRENT_LIST_DIR}/class/aoa/usbh_aoa.c)
    endif()

endif()